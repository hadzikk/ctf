<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GIS CTF Challenge</title>
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css"
        integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/mZEZxqE0jX1A+4xXk="
        crossorigin="" />
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
    <!-- Load Leaflet JavaScript after the document is loaded -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
        integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
        crossorigin=""></script>
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <h1>GIS CTF Challenge</h1>
            </div>
            <div class="header-right">
                <div class="user-info">
                    <span class="username">Welcome, Geographer!</span>
                    <div class="score">Score: <span id="user-score">0</span> pts</div>
                </div>
                <div class="progress-container">
                    <div class="progress-bar">
                        <div class="progress" style="width: 0%"></div>
                    </div>
                    <div class="progress-text">0% Complete</div>
                </div>
            </div>
        </header>

        <div class="main-content">
            <!-- Sidebar -->
            <aside class="sidebar">
                <h2>Challenge List</h2>
                <ul class="challenge-list" id="challenge-list">
                    <!-- Challenges will be populated by JavaScript -->
                </ul>
            </aside>

            <!-- Main Challenge Area -->
            <main class="challenge-area">
                <div class="challenge-header">
                    <h2 id="challenge-title">Select a Challenge</h2>
                    <div class="challenge-points" id="challenge-points">0 pts</div>
                </div>
                
                <div class="challenge-content" id="challenge-content">
                    <p>Please select a challenge from the sidebar to begin.</p>
                </div>

                <div class="challenge-instructions" id="challenge-instructions">
                    <!-- Instructions will be populated by JavaScript -->
                </div>

                <div class="challenge-guide">
                    <div class="guide-tabs">
                        <button class="tab-btn active" data-tab="setup">Setup</button>
                        <button class="tab-btn" data-tab="challenge">Challenge</button>
                        <button class="tab-btn" data-tab="techniques">Techniques</button>
                    </div>
                    <div class="tab-content" id="setup-tab">
                        <h3>Setup Instructions</h3>
                        <p id="setup-content">Select a challenge to view setup instructions.</p>
                    </div>
                    <div class="tab-content hidden" id="challenge-tab">
                        <h3>Challenge Details</h3>
                        <p id="challenge-details">Challenge details will appear here.</p>
                    </div>
                    <div class="tab-content hidden" id="techniques-tab">
                        <h3>Useful Techniques</h3>
                        <p id="techniques-content">Techniques will be shown here.</p>
                    </div>
                </div>

                <div class="flag-submission">
                    <h3>Submit Flag</h3>
                    <div class="flag-input-container">
                        <input type="text" id="flag-input" placeholder="Enter flag here...">
                        <button id="submit-flag" class="btn">Submit</button>
                    </div>
                    <div id="flag-feedback" class="hidden"></div>
                </div>

                <div class="challenge-navigation">
                    <button id="prev-challenge" class="btn btn-secondary" disabled>Previous</button>
                    <button id="next-challenge" class="btn btn-primary">Next</button>
                </div>
            </main>
        </div>
    </div>

    <!-- Initialize the app after Leaflet is loaded -->
    <script>
        // Global map variable
        let challengeMap;
    </script>
    <script src="js/app.js" type="module"></script>
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
</body>
</html>
